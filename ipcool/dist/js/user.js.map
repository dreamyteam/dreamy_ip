{"version":3,"sources":["webpack:///webpack/bootstrap 1c7e99be8aedc2766bc3?88ab***","webpack:///./src/entrys/user.js","webpack:///./src/components/pop_up.js?f91d**","webpack:///./src/components/cropper.js"],"names":[],"mappings":"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","file":"user.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 1c7e99be8aedc2766bc3\n **/","import Popup from '../components/pop_up.js'\nvar cropper  = require('../components/cropper.js');\n// var Avatar = require('../components/avatar_upload.js');\n\n$(function() {\n   /* $(\"#avatar_mask\").on(\"click\",function(){\n        var avatar = new Avatar({\n            input: '#avatar_input_upload',\n            preview: '#avatar_upload',\n            confrimBtn: \"#avatar_upload_submit\"\n        })\n    })*/\n\n    $('#avatar_mask').on('click', function() {\n        var $inputImage = $(\"#avatar_input_upload\");\n        var URL = window.URL || window.webkitURL;\n        var blobURL;\n        if (URL) {\n            $inputImage.change(function() {\n                var files = this.files;\n                var file;\n                if (files && files.length) {\n                    file = files[0];\n                    if (/^image\\/\\w+$/.test(file.type)) {\n                        blobURL = URL.createObjectURL(file);\n                        // \n                        var avatar_popup = new Popup('#avatar_popup');\n                        avatar_popup.alert();\n                        var $avatar = $(\"#avatar_upload\");\n                        $avatar.cropper({\n                            aspectRatio: 1 / 1,\n                            viewMode:3,\n                            dragModel:'move',\n                            highlight:false,\n                            background: false,\n                            crop: function(e) {\n                                // console.log(e.x);\n                                // console.log(e.y);\n                                // console.log(e.width);\n                                // console.log(e.height);\n                                // console.log(e.scaleX);\n                                // console.log(e.scaleY);\n                            }\n                        })\n                        $avatar.one('built.cropper', function() {\n                            URL.revokeObjectURL(blobURL);\n                        }).cropper('reset').cropper('replace', blobURL);\n\n                        //ajax\n                        $(\"#avatar_upload_submit\").off(\"click\");\n                        $(\"#avatar_upload_submit\").on(\"click\", function() {\n                            avatar_popup.destory();\n                            var fd = new FormData();\n                            fd.append(\"file\", file);\n                            $.ajax({\n                                url: '/upload/img',\n                                type: 'POST',\n                                processData: false,\n                                contentType: false,\n                                data: fd,\n                                success: function(result) {\n                                    console.log(result);\n                                    if (result.error_code == 0) {\n                                        var image_url = result.data.image_url;\n                                        //hidden input\n                                        $(\"#avatar_image\").attr(\"src\", image_url);\n                                        $(\"#hidden_avatar\").val(image_url);\n                                    } else if (result.error_code > 0) {\n                                        console.log(result.error_msg)\n                                    }\n                                }\n                            })\n                            return false;\n                        })\n                    } else {\n                        window.alert('');\n                    }\n                }\n            });\n        }\n    })\n})\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/entrys/user.js\n **/","export default class Popup {\n    constructor(el) {\n        this.el = $(el);\n        this.mask = null;\n        this.init();\n    }\n    init() {\n        if ($('#popup_mask').length > 0) {\n            this.mask = $('#popup_mask');\n        } else {\n            this.mask = $(\"<div class='popup_mask' id='popup_mask'></div>\");\n        }\n        this.bindClose();\n    }\n    bindClose() {\n        var self = this;\n        this.mask.on('click', function() {\n            self.destory();\n        })\n        if (this.el.find('button.close')) {\n            var btnClose = this.el.find('button.close');\n            btnClose.on('click', function() {\n                self.destory();\n            })\n        }\n    }\n    destory() {\n        this.mask.remove();\n        this.el.hide();\n    }\n    alert() {\n        this.mask.appendTo(\"body\");\n        this.el.show();\n        this.el.addClass(\"active\");\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/pop_up.js\n **/","/*!\n * Cropper v2.3.0\n * https://github.com/fengyuanchen/cropper\n *\n * Copyright (c) 2014-2016 Fengyuan Chen and contributors\n * Released under the MIT license\n *\n * Date: 2016-02-22T02:13:13.332Z\n */\n  'use strict';\n\n  // Globals\n  var $window = $(window);\n  var $document = $(document);\n  var location = window.location;\n  var navigator = window.navigator;\n  var ArrayBuffer = window.ArrayBuffer;\n  var Uint8Array = window.Uint8Array;\n  var DataView = window.DataView;\n  var btoa = window.btoa;\n\n  // Constants\n  var NAMESPACE = 'cropper';\n\n  // Classes\n  var CLASS_MODAL = 'cropper-modal';\n  var CLASS_HIDE = 'cropper-hide';\n  var CLASS_HIDDEN = 'cropper-hidden';\n  var CLASS_INVISIBLE = 'cropper-invisible';\n  var CLASS_MOVE = 'cropper-move';\n  var CLASS_CROP = 'cropper-crop';\n  var CLASS_DISABLED = 'cropper-disabled';\n  var CLASS_BG = 'cropper-bg';\n\n  // Events\n  var EVENT_MOUSE_DOWN = 'mousedown touchstart pointerdown MSPointerDown';\n  var EVENT_MOUSE_MOVE = 'mousemove touchmove pointermove MSPointerMove';\n  var EVENT_MOUSE_UP = 'mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel';\n  var EVENT_WHEEL = 'wheel mousewheel DOMMouseScroll';\n  var EVENT_DBLCLICK = 'dblclick';\n  var EVENT_LOAD = 'load.' + NAMESPACE;\n  var EVENT_ERROR = 'error.' + NAMESPACE;\n  var EVENT_RESIZE = 'resize.' + NAMESPACE; // Bind to window with namespace\n  var EVENT_BUILD = 'build.' + NAMESPACE;\n  var EVENT_BUILT = 'built.' + NAMESPACE;\n  var EVENT_CROP_START = 'cropstart.' + NAMESPACE;\n  var EVENT_CROP_MOVE = 'cropmove.' + NAMESPACE;\n  var EVENT_CROP_END = 'cropend.' + NAMESPACE;\n  var EVENT_CROP = 'crop.' + NAMESPACE;\n  var EVENT_ZOOM = 'zoom.' + NAMESPACE;\n\n  // RegExps\n  var REGEXP_ACTIONS = /e|w|s|n|se|sw|ne|nw|all|crop|move|zoom/;\n  var REGEXP_DATA_URL = /^data\\:/;\n  var REGEXP_DATA_URL_HEAD = /^data\\:([^\\;]+)\\;base64,/;\n  var REGEXP_DATA_URL_JPEG = /^data\\:image\\/jpeg.*;base64,/;\n\n  // Data keys\n  var DATA_PREVIEW = 'preview';\n  var DATA_ACTION = 'action';\n\n  // Actions\n  var ACTION_EAST = 'e';\n  var ACTION_WEST = 'w';\n  var ACTION_SOUTH = 's';\n  var ACTION_NORTH = 'n';\n  var ACTION_SOUTH_EAST = 'se';\n  var ACTION_SOUTH_WEST = 'sw';\n  var ACTION_NORTH_EAST = 'ne';\n  var ACTION_NORTH_WEST = 'nw';\n  var ACTION_ALL = 'all';\n  var ACTION_CROP = 'crop';\n  var ACTION_MOVE = 'move';\n  var ACTION_ZOOM = 'zoom';\n  var ACTION_NONE = 'none';\n\n  // Supports\n  var SUPPORT_CANVAS = $.isFunction($('<canvas>')[0].getContext);\n  var IS_SAFARI = navigator && /safari/i.test(navigator.userAgent) && /apple computer/i.test(navigator.vendor);\n\n  // Maths\n  var num = Number;\n  var min = Math.min;\n  var max = Math.max;\n  var abs = Math.abs;\n  var sin = Math.sin;\n  var cos = Math.cos;\n  var sqrt = Math.sqrt;\n  var round = Math.round;\n  var floor = Math.floor;\n\n  // Utilities\n  var fromCharCode = String.fromCharCode;\n\n  function isNumber(n) {\n    return typeof n === 'number' && !isNaN(n);\n  }\n\n  function isUndefined(n) {\n    return typeof n === 'undefined';\n  }\n\n  function toArray(obj, offset) {\n    var args = [];\n\n    // This is necessary for IE8\n    if (isNumber(offset)) {\n      args.push(offset);\n    }\n\n    return args.slice.apply(obj, args);\n  }\n\n  // Custom proxy to avoid jQuery's guid\n  function proxy(fn, context) {\n    var args = toArray(arguments, 2);\n\n    return function () {\n      return fn.apply(context, args.concat(toArray(arguments)));\n    };\n  }\n\n  function isCrossOriginURL(url) {\n    var parts = url.match(/^(https?:)\\/\\/([^\\:\\/\\?#]+):?(\\d*)/i);\n\n    return parts && (\n      parts[1] !== location.protocol ||\n      parts[2] !== location.hostname ||\n      parts[3] !== location.port\n    );\n  }\n\n  function addTimestamp(url) {\n    var timestamp = 'timestamp=' + (new Date()).getTime();\n\n    return (url + (url.indexOf('?') === -1 ? '?' : '&') + timestamp);\n  }\n\n  function getCrossOrigin(crossOrigin) {\n    return crossOrigin ? ' crossOrigin=\"' + crossOrigin + '\"' : '';\n  }\n\n  function getImageSize(image, callback) {\n    var newImage;\n\n    // Modern browsers (ignore Safari, #120 & #509)\n    if (image.naturalWidth && !IS_SAFARI) {\n      return callback(image.naturalWidth, image.naturalHeight);\n    }\n\n    // IE8: Don't use `new Image()` here (#319)\n    newImage = document.createElement('img');\n\n    newImage.onload = function () {\n      callback(this.width, this.height);\n    };\n\n    newImage.src = image.src;\n  }\n\n  function getTransform(options) {\n    var transforms = [];\n    var rotate = options.rotate;\n    var scaleX = options.scaleX;\n    var scaleY = options.scaleY;\n\n    if (isNumber(rotate)) {\n      transforms.push('rotate(' + rotate + 'deg)');\n    }\n\n    if (isNumber(scaleX) && isNumber(scaleY)) {\n      transforms.push('scale(' + scaleX + ',' + scaleY + ')');\n    }\n\n    return transforms.length ? transforms.join(' ') : 'none';\n  }\n\n  function getRotatedSizes(data, isReversed) {\n    var deg = abs(data.degree) % 180;\n    var arc = (deg > 90 ? (180 - deg) : deg) * Math.PI / 180;\n    var sinArc = sin(arc);\n    var cosArc = cos(arc);\n    var width = data.width;\n    var height = data.height;\n    var aspectRatio = data.aspectRatio;\n    var newWidth;\n    var newHeight;\n\n    if (!isReversed) {\n      newWidth = width * cosArc + height * sinArc;\n      newHeight = width * sinArc + height * cosArc;\n    } else {\n      newWidth = width / (cosArc + sinArc / aspectRatio);\n      newHeight = newWidth / aspectRatio;\n    }\n\n    return {\n      width: newWidth,\n      height: newHeight\n    };\n  }\n\n  function getSourceCanvas(image, data) {\n    var canvas = $('<canvas>')[0];\n    var context = canvas.getContext('2d');\n    var dstX = 0;\n    var dstY = 0;\n    var dstWidth = data.naturalWidth;\n    var dstHeight = data.naturalHeight;\n    var rotate = data.rotate;\n    var scaleX = data.scaleX;\n    var scaleY = data.scaleY;\n    var scalable = isNumber(scaleX) && isNumber(scaleY) && (scaleX !== 1 || scaleY !== 1);\n    var rotatable = isNumber(rotate) && rotate !== 0;\n    var advanced = rotatable || scalable;\n    var canvasWidth = dstWidth * abs(scaleX || 1);\n    var canvasHeight = dstHeight * abs(scaleY || 1);\n    var translateX;\n    var translateY;\n    var rotated;\n\n    if (scalable) {\n      translateX = canvasWidth / 2;\n      translateY = canvasHeight / 2;\n    }\n\n    if (rotatable) {\n      rotated = getRotatedSizes({\n        width: canvasWidth,\n        height: canvasHeight,\n        degree: rotate\n      });\n\n      canvasWidth = rotated.width;\n      canvasHeight = rotated.height;\n      translateX = canvasWidth / 2;\n      translateY = canvasHeight / 2;\n    }\n\n    canvas.width = canvasWidth;\n    canvas.height = canvasHeight;\n\n    if (advanced) {\n      dstX = -dstWidth / 2;\n      dstY = -dstHeight / 2;\n\n      context.save();\n      context.translate(translateX, translateY);\n    }\n\n    if (rotatable) {\n      context.rotate(rotate * Math.PI / 180);\n    }\n\n    // Should call `scale` after rotated\n    if (scalable) {\n      context.scale(scaleX, scaleY);\n    }\n\n    context.drawImage(image, floor(dstX), floor(dstY), floor(dstWidth), floor(dstHeight));\n\n    if (advanced) {\n      context.restore();\n    }\n\n    return canvas;\n  }\n\n  function getTouchesCenter(touches) {\n    var length = touches.length;\n    var pageX = 0;\n    var pageY = 0;\n\n    if (length) {\n      $.each(touches, function (i, touch) {\n        pageX += touch.pageX;\n        pageY += touch.pageY;\n      });\n\n      pageX /= length;\n      pageY /= length;\n    }\n\n    return {\n      pageX: pageX,\n      pageY: pageY\n    };\n  }\n\n  function getStringFromCharCode(dataView, start, length) {\n    var str = '';\n    var i;\n\n    for (i = start, length += start; i < length; i++) {\n      str += fromCharCode(dataView.getUint8(i));\n    }\n\n    return str;\n  }\n\n  function getOrientation(arrayBuffer) {\n    var dataView = new DataView(arrayBuffer);\n    var length = dataView.byteLength;\n    var orientation;\n    var exifIDCode;\n    var tiffOffset;\n    var firstIFDOffset;\n    var littleEndian;\n    var endianness;\n    var app1Start;\n    var ifdStart;\n    var offset;\n    var i;\n\n    // Only handle JPEG image (start by 0xFFD8)\n    if (dataView.getUint8(0) === 0xFF && dataView.getUint8(1) === 0xD8) {\n      offset = 2;\n\n      while (offset < length) {\n        if (dataView.getUint8(offset) === 0xFF && dataView.getUint8(offset + 1) === 0xE1) {\n          app1Start = offset;\n          break;\n        }\n\n        offset++;\n      }\n    }\n\n    if (app1Start) {\n      exifIDCode = app1Start + 4;\n      tiffOffset = app1Start + 10;\n\n      if (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {\n        endianness = dataView.getUint16(tiffOffset);\n        littleEndian = endianness === 0x4949;\n\n        if (littleEndian || endianness === 0x4D4D /* bigEndian */) {\n          if (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002A) {\n            firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);\n\n            if (firstIFDOffset >= 0x00000008) {\n              ifdStart = tiffOffset + firstIFDOffset;\n            }\n          }\n        }\n      }\n    }\n\n    if (ifdStart) {\n      length = dataView.getUint16(ifdStart, littleEndian);\n\n      for (i = 0; i < length; i++) {\n        offset = ifdStart + i * 12 + 2;\n\n        if (dataView.getUint16(offset, littleEndian) === 0x0112 /* Orientation */) {\n\n          // 8 is the offset of the current tag's value\n          offset += 8;\n\n          // Get the original orientation value\n          orientation = dataView.getUint16(offset, littleEndian);\n\n          // Override the orientation with its default value for Safari (#120)\n          if (IS_SAFARI) {\n            dataView.setUint16(offset, 1, littleEndian);\n          }\n\n          break;\n        }\n      }\n    }\n\n    return orientation;\n  }\n\n  function dataURLToArrayBuffer(dataURL) {\n    var base64 = dataURL.replace(REGEXP_DATA_URL_HEAD, '');\n    var binary = atob(base64);\n    var length = binary.length;\n    var arrayBuffer = new ArrayBuffer(length);\n    var dataView = new Uint8Array(arrayBuffer);\n    var i;\n\n    for (i = 0; i < length; i++) {\n      dataView[i] = binary.charCodeAt(i);\n    }\n\n    return arrayBuffer;\n  }\n\n  // Only available for JPEG image\n  function arrayBufferToDataURL(arrayBuffer) {\n    var dataView = new Uint8Array(arrayBuffer);\n    var length = dataView.length;\n    var base64 = '';\n    var i;\n\n    for (i = 0; i < length; i++) {\n      base64 += fromCharCode(dataView[i]);\n    }\n\n    return 'data:image/jpeg;base64,' + btoa(base64);\n  }\n\n  function Cropper(element, options) {\n    this.$element = $(element);\n    this.options = $.extend({}, Cropper.DEFAULTS, $.isPlainObject(options) && options);\n    this.isLoaded = false;\n    this.isBuilt = false;\n    this.isCompleted = false;\n    this.isRotated = false;\n    this.isCropped = false;\n    this.isDisabled = false;\n    this.isReplaced = false;\n    this.isLimited = false;\n    this.wheeling = false;\n    this.isImg = false;\n    this.originalUrl = '';\n    this.canvas = null;\n    this.cropBox = null;\n    this.init();\n  }\n\n  Cropper.prototype = {\n    constructor: Cropper,\n\n    init: function () {\n      var $this = this.$element;\n      var url;\n\n      if ($this.is('img')) {\n        this.isImg = true;\n\n        // Should use `$.fn.attr` here. e.g.: \"img/picture.jpg\"\n        this.originalUrl = url = $this.attr('src');\n\n        // Stop when it's a blank image\n        if (!url) {\n          return;\n        }\n\n        // Should use `$.fn.prop` here. e.g.: \"http://example.com/img/picture.jpg\"\n        url = $this.prop('src');\n      } else if ($this.is('canvas') && SUPPORT_CANVAS) {\n        url = $this[0].toDataURL();\n      }\n\n      this.load(url);\n    },\n\n    // A shortcut for triggering custom events\n    trigger: function (type, data) {\n      var e = $.Event(type, data);\n\n      this.$element.trigger(e);\n\n      return e;\n    },\n\n    load: function (url) {\n      var options = this.options;\n      var $this = this.$element;\n      var read;\n      var xhr;\n\n      if (!url) {\n        return;\n      }\n\n      // Trigger build event first\n      $this.one(EVENT_BUILD, options.build);\n\n      if (this.trigger(EVENT_BUILD).isDefaultPrevented()) {\n        return;\n      }\n\n      this.url = url;\n      this.image = {};\n\n      if (!options.checkOrientation || !ArrayBuffer) {\n        return this.clone();\n      }\n\n      read = $.proxy(this.read, this);\n\n      // XMLHttpRequest disallows to open a Data URL in some browsers like IE11 and Safari\n      if (REGEXP_DATA_URL.test(url)) {\n        return REGEXP_DATA_URL_JPEG.test(url) ?\n          read(dataURLToArrayBuffer(url)) :\n          this.clone();\n      }\n\n      xhr = new XMLHttpRequest();\n\n      xhr.onerror = xhr.onabort = $.proxy(function () {\n        this.clone();\n      }, this);\n\n      xhr.onload = function () {\n        read(this.response);\n      };\n\n      xhr.open('get', url);\n      xhr.responseType = 'arraybuffer';\n      xhr.send();\n    },\n\n    read: function (arrayBuffer) {\n      var options = this.options;\n      var orientation = getOrientation(arrayBuffer);\n      var image = this.image;\n      var rotate;\n      var scaleX;\n      var scaleY;\n\n      if (orientation > 1) {\n        this.url = arrayBufferToDataURL(arrayBuffer);\n\n        switch (orientation) {\n\n          // flip horizontal\n          case 2:\n            scaleX = -1;\n            break;\n\n          // rotate left 180\n          case 3:\n            rotate = -180;\n            break;\n\n          // flip vertical\n          case 4:\n            scaleY = -1;\n            break;\n\n          // flip vertical + rotate right 90\n          case 5:\n            rotate = 90;\n            scaleY = -1;\n            break;\n\n          // rotate right 90\n          case 6:\n            rotate = 90;\n            break;\n\n          // flip horizontal + rotate right 90\n          case 7:\n            rotate = 90;\n            scaleX = -1;\n            break;\n\n          // rotate left 90\n          case 8:\n            rotate = -90;\n            break;\n        }\n      }\n\n      if (options.rotatable) {\n        image.rotate = rotate;\n      }\n\n      if (options.scalable) {\n        image.scaleX = scaleX;\n        image.scaleY = scaleY;\n      }\n\n      this.clone();\n    },\n\n    clone: function () {\n      var options = this.options;\n      var $this = this.$element;\n      var url = this.url;\n      var crossOrigin = '';\n      var crossOriginUrl;\n      var $clone;\n\n      if (options.checkCrossOrigin && isCrossOriginURL(url)) {\n        crossOrigin = $this.prop('crossOrigin');\n\n        if (crossOrigin) {\n          crossOriginUrl = url;\n        } else {\n          crossOrigin = 'anonymous';\n\n          // Bust cache (#148) when there is not a \"crossOrigin\" property\n          crossOriginUrl = addTimestamp(url);\n        }\n      }\n\n      this.crossOrigin = crossOrigin;\n      this.crossOriginUrl = crossOriginUrl;\n      this.$clone = $clone = $('<img' + getCrossOrigin(crossOrigin) + ' src=\"' + (crossOriginUrl || url) + '\">');\n\n      if (this.isImg) {\n        if ($this[0].complete) {\n          this.start();\n        } else {\n          $this.one(EVENT_LOAD, $.proxy(this.start, this));\n        }\n      } else {\n        $clone.\n          one(EVENT_LOAD, $.proxy(this.start, this)).\n          one(EVENT_ERROR, $.proxy(this.stop, this)).\n          addClass(CLASS_HIDE).\n          insertAfter($this);\n      }\n    },\n\n    start: function () {\n      var $image = this.$element;\n      var $clone = this.$clone;\n\n      if (!this.isImg) {\n        $clone.off(EVENT_ERROR, this.stop);\n        $image = $clone;\n      }\n\n      getImageSize($image[0], $.proxy(function (naturalWidth, naturalHeight) {\n        $.extend(this.image, {\n          naturalWidth: naturalWidth,\n          naturalHeight: naturalHeight,\n          aspectRatio: naturalWidth / naturalHeight\n        });\n\n        this.isLoaded = true;\n        this.build();\n      }, this));\n    },\n\n    stop: function () {\n      this.$clone.remove();\n      this.$clone = null;\n    },\n\n    build: function () {\n      var options = this.options;\n      var $this = this.$element;\n      var $clone = this.$clone;\n      var $cropper;\n      var $cropBox;\n      var $face;\n\n      if (!this.isLoaded) {\n        return;\n      }\n\n      // Unbuild first when replace\n      if (this.isBuilt) {\n        this.unbuild();\n      }\n\n      // Create cropper elements\n      this.$container = $this.parent();\n      this.$cropper = $cropper = $(Cropper.TEMPLATE);\n      this.$canvas = $cropper.find('.cropper-canvas').append($clone);\n      this.$dragBox = $cropper.find('.cropper-drag-box');\n      this.$cropBox = $cropBox = $cropper.find('.cropper-crop-box');\n      this.$viewBox = $cropper.find('.cropper-view-box');\n      this.$face = $face = $cropBox.find('.cropper-face');\n\n      // Hide the original image\n      $this.addClass(CLASS_HIDDEN).after($cropper);\n\n      // Show the clone image if is hidden\n      if (!this.isImg) {\n        $clone.removeClass(CLASS_HIDE);\n      }\n\n      this.initPreview();\n      this.bind();\n\n      options.aspectRatio = max(0, options.aspectRatio) || NaN;\n      options.viewMode = max(0, min(3, round(options.viewMode))) || 0;\n\n      if (options.autoCrop) {\n        this.isCropped = true;\n\n        if (options.modal) {\n          this.$dragBox.addClass(CLASS_MODAL);\n        }\n      } else {\n        $cropBox.addClass(CLASS_HIDDEN);\n      }\n\n      if (!options.guides) {\n        $cropBox.find('.cropper-dashed').addClass(CLASS_HIDDEN);\n      }\n\n      if (!options.center) {\n        $cropBox.find('.cropper-center').addClass(CLASS_HIDDEN);\n      }\n\n      if (options.cropBoxMovable) {\n        $face.addClass(CLASS_MOVE).data(DATA_ACTION, ACTION_ALL);\n      }\n\n      if (!options.highlight) {\n        $face.addClass(CLASS_INVISIBLE);\n      }\n\n      if (options.background) {\n        $cropper.addClass(CLASS_BG);\n      }\n\n      if (!options.cropBoxResizable) {\n        $cropBox.find('.cropper-line, .cropper-point').addClass(CLASS_HIDDEN);\n      }\n\n      this.setDragMode(options.dragMode);\n      this.render();\n      this.isBuilt = true;\n      this.setData(options.data);\n      $this.one(EVENT_BUILT, options.built);\n\n      // Trigger the built event asynchronously to keep `data('cropper')` is defined\n      setTimeout($.proxy(function () {\n        this.trigger(EVENT_BUILT);\n        this.isCompleted = true;\n      }, this), 0);\n    },\n\n    unbuild: function () {\n      if (!this.isBuilt) {\n        return;\n      }\n\n      this.isBuilt = false;\n      this.isCompleted = false;\n      this.initialImage = null;\n\n      // Clear `initialCanvas` is necessary when replace\n      this.initialCanvas = null;\n      this.initialCropBox = null;\n      this.container = null;\n      this.canvas = null;\n\n      // Clear `cropBox` is necessary when replace\n      this.cropBox = null;\n      this.unbind();\n\n      this.resetPreview();\n      this.$preview = null;\n\n      this.$viewBox = null;\n      this.$cropBox = null;\n      this.$dragBox = null;\n      this.$canvas = null;\n      this.$container = null;\n\n      this.$cropper.remove();\n      this.$cropper = null;\n    },\n\n    render: function () {\n      this.initContainer();\n      this.initCanvas();\n      this.initCropBox();\n\n      this.renderCanvas();\n\n      if (this.isCropped) {\n        this.renderCropBox();\n      }\n    },\n\n    initContainer: function () {\n      var options = this.options;\n      var $this = this.$element;\n      var $container = this.$container;\n      var $cropper = this.$cropper;\n\n      $cropper.addClass(CLASS_HIDDEN);\n      $this.removeClass(CLASS_HIDDEN);\n\n      $cropper.css((this.container = {\n        width: max($container.width(), num(options.minContainerWidth) || 200),\n        height: max($container.height(), num(options.minContainerHeight) || 100)\n      }));\n\n      $this.addClass(CLASS_HIDDEN);\n      $cropper.removeClass(CLASS_HIDDEN);\n    },\n\n    // Canvas (image wrapper)\n    initCanvas: function () {\n      var viewMode = this.options.viewMode;\n      var container = this.container;\n      var containerWidth = container.width;\n      var containerHeight = container.height;\n      var image = this.image;\n      var imageNaturalWidth = image.naturalWidth;\n      var imageNaturalHeight = image.naturalHeight;\n      var is90Degree = abs(image.rotate) === 90;\n      var naturalWidth = is90Degree ? imageNaturalHeight : imageNaturalWidth;\n      var naturalHeight = is90Degree ? imageNaturalWidth : imageNaturalHeight;\n      var aspectRatio = naturalWidth / naturalHeight;\n      var canvasWidth = containerWidth;\n      var canvasHeight = containerHeight;\n      var canvas;\n\n      if (containerHeight * aspectRatio > containerWidth) {\n        if (viewMode === 3) {\n          canvasWidth = containerHeight * aspectRatio;\n        } else {\n          canvasHeight = containerWidth / aspectRatio;\n        }\n      } else {\n        if (viewMode === 3) {\n          canvasHeight = containerWidth / aspectRatio;\n        } else {\n          canvasWidth = containerHeight * aspectRatio;\n        }\n      }\n\n      canvas = {\n        naturalWidth: naturalWidth,\n        naturalHeight: naturalHeight,\n        aspectRatio: aspectRatio,\n        width: canvasWidth,\n        height: canvasHeight\n      };\n\n      canvas.oldLeft = canvas.left = (containerWidth - canvasWidth) / 2;\n      canvas.oldTop = canvas.top = (containerHeight - canvasHeight) / 2;\n\n      this.canvas = canvas;\n      this.isLimited = (viewMode === 1 || viewMode === 2);\n      this.limitCanvas(true, true);\n      this.initialImage = $.extend({}, image);\n      this.initialCanvas = $.extend({}, canvas);\n    },\n\n    limitCanvas: function (isSizeLimited, isPositionLimited) {\n      var options = this.options;\n      var viewMode = options.viewMode;\n      var container = this.container;\n      var containerWidth = container.width;\n      var containerHeight = container.height;\n      var canvas = this.canvas;\n      var aspectRatio = canvas.aspectRatio;\n      var cropBox = this.cropBox;\n      var isCropped = this.isCropped && cropBox;\n      var minCanvasWidth;\n      var minCanvasHeight;\n      var newCanvasLeft;\n      var newCanvasTop;\n\n      if (isSizeLimited) {\n        minCanvasWidth = num(options.minCanvasWidth) || 0;\n        minCanvasHeight = num(options.minCanvasHeight) || 0;\n\n        if (viewMode) {\n          if (viewMode > 1) {\n            minCanvasWidth = max(minCanvasWidth, containerWidth);\n            minCanvasHeight = max(minCanvasHeight, containerHeight);\n\n            if (viewMode === 3) {\n              if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n                minCanvasWidth = minCanvasHeight * aspectRatio;\n              } else {\n                minCanvasHeight = minCanvasWidth / aspectRatio;\n              }\n            }\n          } else {\n            if (minCanvasWidth) {\n              minCanvasWidth = max(minCanvasWidth, isCropped ? cropBox.width : 0);\n            } else if (minCanvasHeight) {\n              minCanvasHeight = max(minCanvasHeight, isCropped ? cropBox.height : 0);\n            } else if (isCropped) {\n              minCanvasWidth = cropBox.width;\n              minCanvasHeight = cropBox.height;\n\n              if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n                minCanvasWidth = minCanvasHeight * aspectRatio;\n              } else {\n                minCanvasHeight = minCanvasWidth / aspectRatio;\n              }\n            }\n          }\n        }\n\n        if (minCanvasWidth && minCanvasHeight) {\n          if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n            minCanvasHeight = minCanvasWidth / aspectRatio;\n          } else {\n            minCanvasWidth = minCanvasHeight * aspectRatio;\n          }\n        } else if (minCanvasWidth) {\n          minCanvasHeight = minCanvasWidth / aspectRatio;\n        } else if (minCanvasHeight) {\n          minCanvasWidth = minCanvasHeight * aspectRatio;\n        }\n\n        canvas.minWidth = minCanvasWidth;\n        canvas.minHeight = minCanvasHeight;\n        canvas.maxWidth = Infinity;\n        canvas.maxHeight = Infinity;\n      }\n\n      if (isPositionLimited) {\n        if (viewMode) {\n          newCanvasLeft = containerWidth - canvas.width;\n          newCanvasTop = containerHeight - canvas.height;\n\n          canvas.minLeft = min(0, newCanvasLeft);\n          canvas.minTop = min(0, newCanvasTop);\n          canvas.maxLeft = max(0, newCanvasLeft);\n          canvas.maxTop = max(0, newCanvasTop);\n\n          if (isCropped && this.isLimited) {\n            canvas.minLeft = min(\n              cropBox.left,\n              cropBox.left + cropBox.width - canvas.width\n            );\n            canvas.minTop = min(\n              cropBox.top,\n              cropBox.top + cropBox.height - canvas.height\n            );\n            canvas.maxLeft = cropBox.left;\n            canvas.maxTop = cropBox.top;\n\n            if (viewMode === 2) {\n              if (canvas.width >= containerWidth) {\n                canvas.minLeft = min(0, newCanvasLeft);\n                canvas.maxLeft = max(0, newCanvasLeft);\n              }\n\n              if (canvas.height >= containerHeight) {\n                canvas.minTop = min(0, newCanvasTop);\n                canvas.maxTop = max(0, newCanvasTop);\n              }\n            }\n          }\n        } else {\n          canvas.minLeft = -canvas.width;\n          canvas.minTop = -canvas.height;\n          canvas.maxLeft = containerWidth;\n          canvas.maxTop = containerHeight;\n        }\n      }\n    },\n\n    renderCanvas: function (isChanged) {\n      var canvas = this.canvas;\n      var image = this.image;\n      var rotate = image.rotate;\n      var naturalWidth = image.naturalWidth;\n      var naturalHeight = image.naturalHeight;\n      var aspectRatio;\n      var rotated;\n\n      if (this.isRotated) {\n        this.isRotated = false;\n\n        // Computes rotated sizes with image sizes\n        rotated = getRotatedSizes({\n          width: image.width,\n          height: image.height,\n          degree: rotate\n        });\n\n        aspectRatio = rotated.width / rotated.height;\n\n        if (aspectRatio !== canvas.aspectRatio) {\n          canvas.left -= (rotated.width - canvas.width) / 2;\n          canvas.top -= (rotated.height - canvas.height) / 2;\n          canvas.width = rotated.width;\n          canvas.height = rotated.height;\n          canvas.aspectRatio = aspectRatio;\n          canvas.naturalWidth = naturalWidth;\n          canvas.naturalHeight = naturalHeight;\n\n          // Computes rotated sizes with natural image sizes\n          if (rotate % 180) {\n            rotated = getRotatedSizes({\n              width: naturalWidth,\n              height: naturalHeight,\n              degree: rotate\n            });\n\n            canvas.naturalWidth = rotated.width;\n            canvas.naturalHeight = rotated.height;\n          }\n\n          this.limitCanvas(true, false);\n        }\n      }\n\n      if (canvas.width > canvas.maxWidth || canvas.width < canvas.minWidth) {\n        canvas.left = canvas.oldLeft;\n      }\n\n      if (canvas.height > canvas.maxHeight || canvas.height < canvas.minHeight) {\n        canvas.top = canvas.oldTop;\n      }\n\n      canvas.width = min(max(canvas.width, canvas.minWidth), canvas.maxWidth);\n      canvas.height = min(max(canvas.height, canvas.minHeight), canvas.maxHeight);\n\n      this.limitCanvas(false, true);\n\n      canvas.oldLeft = canvas.left = min(max(canvas.left, canvas.minLeft), canvas.maxLeft);\n      canvas.oldTop = canvas.top = min(max(canvas.top, canvas.minTop), canvas.maxTop);\n\n      this.$canvas.css({\n        width: canvas.width,\n        height: canvas.height,\n        left: canvas.left,\n        top: canvas.top\n      });\n\n      this.renderImage();\n\n      if (this.isCropped && this.isLimited) {\n        this.limitCropBox(true, true);\n      }\n\n      if (isChanged) {\n        this.output();\n      }\n    },\n\n    renderImage: function (isChanged) {\n      var canvas = this.canvas;\n      var image = this.image;\n      var reversed;\n\n      if (image.rotate) {\n        reversed = getRotatedSizes({\n          width: canvas.width,\n          height: canvas.height,\n          degree: image.rotate,\n          aspectRatio: image.aspectRatio\n        }, true);\n      }\n\n      $.extend(image, reversed ? {\n        width: reversed.width,\n        height: reversed.height,\n        left: (canvas.width - reversed.width) / 2,\n        top: (canvas.height - reversed.height) / 2\n      } : {\n        width: canvas.width,\n        height: canvas.height,\n        left: 0,\n        top: 0\n      });\n\n      this.$clone.css({\n        width: image.width,\n        height: image.height,\n        marginLeft: image.left,\n        marginTop: image.top,\n        transform: getTransform(image)\n      });\n\n      if (isChanged) {\n        this.output();\n      }\n    },\n\n    initCropBox: function () {\n      var options = this.options;\n      var canvas = this.canvas;\n      var aspectRatio = options.aspectRatio;\n      var autoCropArea = num(options.autoCropArea) || 0.8;\n      var cropBox = {\n            width: canvas.width,\n            height: canvas.height\n          };\n\n      if (aspectRatio) {\n        if (canvas.height * aspectRatio > canvas.width) {\n          cropBox.height = cropBox.width / aspectRatio;\n        } else {\n          cropBox.width = cropBox.height * aspectRatio;\n        }\n      }\n\n      this.cropBox = cropBox;\n      this.limitCropBox(true, true);\n\n      // Initialize auto crop area\n      cropBox.width = min(max(cropBox.width, cropBox.minWidth), cropBox.maxWidth);\n      cropBox.height = min(max(cropBox.height, cropBox.minHeight), cropBox.maxHeight);\n\n      // The width of auto crop area must large than \"minWidth\", and the height too. (#164)\n      cropBox.width = max(cropBox.minWidth, cropBox.width * autoCropArea);\n      cropBox.height = max(cropBox.minHeight, cropBox.height * autoCropArea);\n      cropBox.oldLeft = cropBox.left = canvas.left + (canvas.width - cropBox.width) / 2;\n      cropBox.oldTop = cropBox.top = canvas.top + (canvas.height - cropBox.height) / 2;\n\n      this.initialCropBox = $.extend({}, cropBox);\n    },\n\n    limitCropBox: function (isSizeLimited, isPositionLimited) {\n      var options = this.options;\n      var aspectRatio = options.aspectRatio;\n      var container = this.container;\n      var containerWidth = container.width;\n      var containerHeight = container.height;\n      var canvas = this.canvas;\n      var cropBox = this.cropBox;\n      var isLimited = this.isLimited;\n      var minCropBoxWidth;\n      var minCropBoxHeight;\n      var maxCropBoxWidth;\n      var maxCropBoxHeight;\n\n      if (isSizeLimited) {\n        minCropBoxWidth = num(options.minCropBoxWidth) || 0;\n        minCropBoxHeight = num(options.minCropBoxHeight) || 0;\n\n        // The min/maxCropBoxWidth/Height must be less than containerWidth/Height\n        minCropBoxWidth = min(minCropBoxWidth, containerWidth);\n        minCropBoxHeight = min(minCropBoxHeight, containerHeight);\n        maxCropBoxWidth = min(containerWidth, isLimited ? canvas.width : containerWidth);\n        maxCropBoxHeight = min(containerHeight, isLimited ? canvas.height : containerHeight);\n\n        if (aspectRatio) {\n          if (minCropBoxWidth && minCropBoxHeight) {\n            if (minCropBoxHeight * aspectRatio > minCropBoxWidth) {\n              minCropBoxHeight = minCropBoxWidth / aspectRatio;\n            } else {\n              minCropBoxWidth = minCropBoxHeight * aspectRatio;\n            }\n          } else if (minCropBoxWidth) {\n            minCropBoxHeight = minCropBoxWidth / aspectRatio;\n          } else if (minCropBoxHeight) {\n            minCropBoxWidth = minCropBoxHeight * aspectRatio;\n          }\n\n          if (maxCropBoxHeight * aspectRatio > maxCropBoxWidth) {\n            maxCropBoxHeight = maxCropBoxWidth / aspectRatio;\n          } else {\n            maxCropBoxWidth = maxCropBoxHeight * aspectRatio;\n          }\n        }\n\n        // The minWidth/Height must be less than maxWidth/Height\n        cropBox.minWidth = min(minCropBoxWidth, maxCropBoxWidth);\n        cropBox.minHeight = min(minCropBoxHeight, maxCropBoxHeight);\n        cropBox.maxWidth = maxCropBoxWidth;\n        cropBox.maxHeight = maxCropBoxHeight;\n      }\n\n      if (isPositionLimited) {\n        if (isLimited) {\n          cropBox.minLeft = max(0, canvas.left);\n          cropBox.minTop = max(0, canvas.top);\n          cropBox.maxLeft = min(containerWidth, canvas.left + canvas.width) - cropBox.width;\n          cropBox.maxTop = min(containerHeight, canvas.top + canvas.height) - cropBox.height;\n        } else {\n          cropBox.minLeft = 0;\n          cropBox.minTop = 0;\n          cropBox.maxLeft = containerWidth - cropBox.width;\n          cropBox.maxTop = containerHeight - cropBox.height;\n        }\n      }\n    },\n\n    renderCropBox: function () {\n      var options = this.options;\n      var container = this.container;\n      var containerWidth = container.width;\n      var containerHeight = container.height;\n      var cropBox = this.cropBox;\n\n      if (cropBox.width > cropBox.maxWidth || cropBox.width < cropBox.minWidth) {\n        cropBox.left = cropBox.oldLeft;\n      }\n\n      if (cropBox.height > cropBox.maxHeight || cropBox.height < cropBox.minHeight) {\n        cropBox.top = cropBox.oldTop;\n      }\n\n      cropBox.width = min(max(cropBox.width, cropBox.minWidth), cropBox.maxWidth);\n      cropBox.height = min(max(cropBox.height, cropBox.minHeight), cropBox.maxHeight);\n\n      this.limitCropBox(false, true);\n\n      cropBox.oldLeft = cropBox.left = min(max(cropBox.left, cropBox.minLeft), cropBox.maxLeft);\n      cropBox.oldTop = cropBox.top = min(max(cropBox.top, cropBox.minTop), cropBox.maxTop);\n\n      if (options.movable && options.cropBoxMovable) {\n\n        // Turn to move the canvas when the crop box is equal to the container\n        this.$face.data(DATA_ACTION, (cropBox.width === containerWidth && cropBox.height === containerHeight) ? ACTION_MOVE : ACTION_ALL);\n      }\n\n      this.$cropBox.css({\n        width: cropBox.width,\n        height: cropBox.height,\n        left: cropBox.left,\n        top: cropBox.top\n      });\n\n      if (this.isCropped && this.isLimited) {\n        this.limitCanvas(true, true);\n      }\n\n      if (!this.isDisabled) {\n        this.output();\n      }\n    },\n\n    output: function () {\n      this.preview();\n\n      if (this.isCompleted) {\n        this.trigger(EVENT_CROP, this.getData());\n      } else if (!this.isBuilt) {\n\n        // Only trigger one crop event before complete\n        this.$element.one(EVENT_BUILT, $.proxy(function () {\n          this.trigger(EVENT_CROP, this.getData());\n        }, this));\n      }\n    },\n\n    initPreview: function () {\n      var crossOrigin = getCrossOrigin(this.crossOrigin);\n      var url = crossOrigin ? this.crossOriginUrl : this.url;\n      var $clone2;\n\n      this.$preview = $(this.options.preview);\n      this.$clone2 = $clone2 = $('<img' + crossOrigin + ' src=\"' + url + '\">');\n      this.$viewBox.html($clone2);\n      this.$preview.each(function () {\n        var $this = $(this);\n\n        // Save the original size for recover\n        $this.data(DATA_PREVIEW, {\n          width: $this.width(),\n          height: $this.height(),\n          html: $this.html()\n        });\n\n        /**\n         * Override img element styles\n         * Add `display:block` to avoid margin top issue\n         * (Occur only when margin-top <= -height)\n         */\n        $this.html(\n          '<img' + crossOrigin + ' src=\"' + url + '\" style=\"' +\n          'display:block;width:100%;height:auto;' +\n          'min-width:0!important;min-height:0!important;' +\n          'max-width:none!important;max-height:none!important;' +\n          'image-orientation:0deg!important;\">'\n        );\n      });\n    },\n\n    resetPreview: function () {\n      this.$preview.each(function () {\n        var $this = $(this);\n        var data = $this.data(DATA_PREVIEW);\n\n        $this.css({\n          width: data.width,\n          height: data.height\n        }).html(data.html).removeData(DATA_PREVIEW);\n      });\n    },\n\n    preview: function () {\n      var image = this.image;\n      var canvas = this.canvas;\n      var cropBox = this.cropBox;\n      var cropBoxWidth = cropBox.width;\n      var cropBoxHeight = cropBox.height;\n      var width = image.width;\n      var height = image.height;\n      var left = cropBox.left - canvas.left - image.left;\n      var top = cropBox.top - canvas.top - image.top;\n\n      if (!this.isCropped || this.isDisabled) {\n        return;\n      }\n\n      this.$clone2.css({\n        width: width,\n        height: height,\n        marginLeft: -left,\n        marginTop: -top,\n        transform: getTransform(image)\n      });\n\n      this.$preview.each(function () {\n        var $this = $(this);\n        var data = $this.data(DATA_PREVIEW);\n        var originalWidth = data.width;\n        var originalHeight = data.height;\n        var newWidth = originalWidth;\n        var newHeight = originalHeight;\n        var ratio = 1;\n\n        if (cropBoxWidth) {\n          ratio = originalWidth / cropBoxWidth;\n          newHeight = cropBoxHeight * ratio;\n        }\n\n        if (cropBoxHeight && newHeight > originalHeight) {\n          ratio = originalHeight / cropBoxHeight;\n          newWidth = cropBoxWidth * ratio;\n          newHeight = originalHeight;\n        }\n\n        $this.css({\n          width: newWidth,\n          height: newHeight\n        }).find('img').css({\n          width: width * ratio,\n          height: height * ratio,\n          marginLeft: -left * ratio,\n          marginTop: -top * ratio,\n          transform: getTransform(image)\n        });\n      });\n    },\n\n    bind: function () {\n      var options = this.options;\n      var $this = this.$element;\n      var $cropper = this.$cropper;\n\n      if ($.isFunction(options.cropstart)) {\n        $this.on(EVENT_CROP_START, options.cropstart);\n      }\n\n      if ($.isFunction(options.cropmove)) {\n        $this.on(EVENT_CROP_MOVE, options.cropmove);\n      }\n\n      if ($.isFunction(options.cropend)) {\n        $this.on(EVENT_CROP_END, options.cropend);\n      }\n\n      if ($.isFunction(options.crop)) {\n        $this.on(EVENT_CROP, options.crop);\n      }\n\n      if ($.isFunction(options.zoom)) {\n        $this.on(EVENT_ZOOM, options.zoom);\n      }\n\n      $cropper.on(EVENT_MOUSE_DOWN, $.proxy(this.cropStart, this));\n\n      if (options.zoomable && options.zoomOnWheel) {\n        $cropper.on(EVENT_WHEEL, $.proxy(this.wheel, this));\n      }\n\n      if (options.toggleDragModeOnDblclick) {\n        $cropper.on(EVENT_DBLCLICK, $.proxy(this.dblclick, this));\n      }\n\n      $document.\n        on(EVENT_MOUSE_MOVE, (this._cropMove = proxy(this.cropMove, this))).\n        on(EVENT_MOUSE_UP, (this._cropEnd = proxy(this.cropEnd, this)));\n\n      if (options.responsive) {\n        $window.on(EVENT_RESIZE, (this._resize = proxy(this.resize, this)));\n      }\n    },\n\n    unbind: function () {\n      var options = this.options;\n      var $this = this.$element;\n      var $cropper = this.$cropper;\n\n      if ($.isFunction(options.cropstart)) {\n        $this.off(EVENT_CROP_START, options.cropstart);\n      }\n\n      if ($.isFunction(options.cropmove)) {\n        $this.off(EVENT_CROP_MOVE, options.cropmove);\n      }\n\n      if ($.isFunction(options.cropend)) {\n        $this.off(EVENT_CROP_END, options.cropend);\n      }\n\n      if ($.isFunction(options.crop)) {\n        $this.off(EVENT_CROP, options.crop);\n      }\n\n      if ($.isFunction(options.zoom)) {\n        $this.off(EVENT_ZOOM, options.zoom);\n      }\n\n      $cropper.off(EVENT_MOUSE_DOWN, this.cropStart);\n\n      if (options.zoomable && options.zoomOnWheel) {\n        $cropper.off(EVENT_WHEEL, this.wheel);\n      }\n\n      if (options.toggleDragModeOnDblclick) {\n        $cropper.off(EVENT_DBLCLICK, this.dblclick);\n      }\n\n      $document.\n        off(EVENT_MOUSE_MOVE, this._cropMove).\n        off(EVENT_MOUSE_UP, this._cropEnd);\n\n      if (options.responsive) {\n        $window.off(EVENT_RESIZE, this._resize);\n      }\n    },\n\n    resize: function () {\n      var restore = this.options.restore;\n      var $container = this.$container;\n      var container = this.container;\n      var canvasData;\n      var cropBoxData;\n      var ratio;\n\n      // Check `container` is necessary for IE8\n      if (this.isDisabled || !container) {\n        return;\n      }\n\n      ratio = $container.width() / container.width;\n\n      // Resize when width changed or height changed\n      if (ratio !== 1 || $container.height() !== container.height) {\n        if (restore) {\n          canvasData = this.getCanvasData();\n          cropBoxData = this.getCropBoxData();\n        }\n\n        this.render();\n\n        if (restore) {\n          this.setCanvasData($.each(canvasData, function (i, n) {\n            canvasData[i] = n * ratio;\n          }));\n          this.setCropBoxData($.each(cropBoxData, function (i, n) {\n            cropBoxData[i] = n * ratio;\n          }));\n        }\n      }\n    },\n\n    dblclick: function () {\n      if (this.isDisabled) {\n        return;\n      }\n\n      if (this.$dragBox.hasClass(CLASS_CROP)) {\n        this.setDragMode(ACTION_MOVE);\n      } else {\n        this.setDragMode(ACTION_CROP);\n      }\n    },\n\n    wheel: function (event) {\n      var e = event.originalEvent || event;\n      var ratio = num(this.options.wheelZoomRatio) || 0.1;\n      var delta = 1;\n\n      if (this.isDisabled) {\n        return;\n      }\n\n      event.preventDefault();\n\n      // Limit wheel speed to prevent zoom too fast\n      if (this.wheeling) {\n        return;\n      }\n\n      this.wheeling = true;\n\n      setTimeout($.proxy(function () {\n        this.wheeling = false;\n      }, this), 50);\n\n      if (e.deltaY) {\n        delta = e.deltaY > 0 ? 1 : -1;\n      } else if (e.wheelDelta) {\n        delta = -e.wheelDelta / 120;\n      } else if (e.detail) {\n        delta = e.detail > 0 ? 1 : -1;\n      }\n\n      this.zoom(-delta * ratio, event);\n    },\n\n    cropStart: function (event) {\n      var options = this.options;\n      var originalEvent = event.originalEvent;\n      var touches = originalEvent && originalEvent.touches;\n      var e = event;\n      var touchesLength;\n      var action;\n\n      if (this.isDisabled) {\n        return;\n      }\n\n      if (touches) {\n        touchesLength = touches.length;\n\n        if (touchesLength > 1) {\n          if (options.zoomable && options.zoomOnTouch && touchesLength === 2) {\n            e = touches[1];\n            this.startX2 = e.pageX;\n            this.startY2 = e.pageY;\n            action = ACTION_ZOOM;\n          } else {\n            return;\n          }\n        }\n\n        e = touches[0];\n      }\n\n      action = action || $(e.target).data(DATA_ACTION);\n\n      if (REGEXP_ACTIONS.test(action)) {\n        if (this.trigger(EVENT_CROP_START, {\n          originalEvent: originalEvent,\n          action: action\n        }).isDefaultPrevented()) {\n          return;\n        }\n\n        event.preventDefault();\n\n        this.action = action;\n        this.cropping = false;\n\n        // IE8  has `event.pageX/Y`, but not `event.originalEvent.pageX/Y`\n        // IE10 has `event.originalEvent.pageX/Y`, but not `event.pageX/Y`\n        this.startX = e.pageX || originalEvent && originalEvent.pageX;\n        this.startY = e.pageY || originalEvent && originalEvent.pageY;\n\n        if (action === ACTION_CROP) {\n          this.cropping = true;\n          this.$dragBox.addClass(CLASS_MODAL);\n        }\n      }\n    },\n\n    cropMove: function (event) {\n      var options = this.options;\n      var originalEvent = event.originalEvent;\n      var touches = originalEvent && originalEvent.touches;\n      var e = event;\n      var action = this.action;\n      var touchesLength;\n\n      if (this.isDisabled) {\n        return;\n      }\n\n      if (touches) {\n        touchesLength = touches.length;\n\n        if (touchesLength > 1) {\n          if (options.zoomable && options.zoomOnTouch && touchesLength === 2) {\n            e = touches[1];\n            this.endX2 = e.pageX;\n            this.endY2 = e.pageY;\n          } else {\n            return;\n          }\n        }\n\n        e = touches[0];\n      }\n\n      if (action) {\n        if (this.trigger(EVENT_CROP_MOVE, {\n          originalEvent: originalEvent,\n          action: action\n        }).isDefaultPrevented()) {\n          return;\n        }\n\n        event.preventDefault();\n\n        this.endX = e.pageX || originalEvent && originalEvent.pageX;\n        this.endY = e.pageY || originalEvent && originalEvent.pageY;\n\n        this.change(e.shiftKey, action === ACTION_ZOOM ? event : null);\n      }\n    },\n\n    cropEnd: function (event) {\n      var originalEvent = event.originalEvent;\n      var action = this.action;\n\n      if (this.isDisabled) {\n        return;\n      }\n\n      if (action) {\n        event.preventDefault();\n\n        if (this.cropping) {\n          this.cropping = false;\n          this.$dragBox.toggleClass(CLASS_MODAL, this.isCropped && this.options.modal);\n        }\n\n        this.action = '';\n\n        this.trigger(EVENT_CROP_END, {\n          originalEvent: originalEvent,\n          action: action\n        });\n      }\n    },\n\n    change: function (shiftKey, event) {\n      var options = this.options;\n      var aspectRatio = options.aspectRatio;\n      var action = this.action;\n      var container = this.container;\n      var canvas = this.canvas;\n      var cropBox = this.cropBox;\n      var width = cropBox.width;\n      var height = cropBox.height;\n      var left = cropBox.left;\n      var top = cropBox.top;\n      var right = left + width;\n      var bottom = top + height;\n      var minLeft = 0;\n      var minTop = 0;\n      var maxWidth = container.width;\n      var maxHeight = container.height;\n      var renderable = true;\n      var offset;\n      var range;\n\n      // Locking aspect ratio in \"free mode\" by holding shift key (#259)\n      if (!aspectRatio && shiftKey) {\n        aspectRatio = width && height ? width / height : 1;\n      }\n\n      if (this.limited) {\n        minLeft = cropBox.minLeft;\n        minTop = cropBox.minTop;\n        maxWidth = minLeft + min(container.width, canvas.left + canvas.width);\n        maxHeight = minTop + min(container.height, canvas.top + canvas.height);\n      }\n\n      range = {\n        x: this.endX - this.startX,\n        y: this.endY - this.startY\n      };\n\n      if (aspectRatio) {\n        range.X = range.y * aspectRatio;\n        range.Y = range.x / aspectRatio;\n      }\n\n      switch (action) {\n        // Move crop box\n        case ACTION_ALL:\n          left += range.x;\n          top += range.y;\n          break;\n\n        // Resize crop box\n        case ACTION_EAST:\n          if (range.x >= 0 && (right >= maxWidth || aspectRatio &&\n            (top <= minTop || bottom >= maxHeight))) {\n\n            renderable = false;\n            break;\n          }\n\n          width += range.x;\n\n          if (aspectRatio) {\n            height = width / aspectRatio;\n            top -= range.Y / 2;\n          }\n\n          if (width < 0) {\n            action = ACTION_WEST;\n            width = 0;\n          }\n\n          break;\n\n        case ACTION_NORTH:\n          if (range.y <= 0 && (top <= minTop || aspectRatio &&\n            (left <= minLeft || right >= maxWidth))) {\n\n            renderable = false;\n            break;\n          }\n\n          height -= range.y;\n          top += range.y;\n\n          if (aspectRatio) {\n            width = height * aspectRatio;\n            left += range.X / 2;\n          }\n\n          if (height < 0) {\n            action = ACTION_SOUTH;\n            height = 0;\n          }\n\n          break;\n\n        case ACTION_WEST:\n          if (range.x <= 0 && (left <= minLeft || aspectRatio &&\n            (top <= minTop || bottom >= maxHeight))) {\n\n            renderable = false;\n            break;\n          }\n\n          width -= range.x;\n          left += range.x;\n\n          if (aspectRatio) {\n            height = width / aspectRatio;\n            top += range.Y / 2;\n          }\n\n          if (width < 0) {\n            action = ACTION_EAST;\n            width = 0;\n          }\n\n          break;\n\n        case ACTION_SOUTH:\n          if (range.y >= 0 && (bottom >= maxHeight || aspectRatio &&\n            (left <= minLeft || right >= maxWidth))) {\n\n            renderable = false;\n            break;\n          }\n\n          height += range.y;\n\n          if (aspectRatio) {\n            width = height * aspectRatio;\n            left -= range.X / 2;\n          }\n\n          if (height < 0) {\n            action = ACTION_NORTH;\n            height = 0;\n          }\n\n          break;\n\n        case ACTION_NORTH_EAST:\n          if (aspectRatio) {\n            if (range.y <= 0 && (top <= minTop || right >= maxWidth)) {\n              renderable = false;\n              break;\n            }\n\n            height -= range.y;\n            top += range.y;\n            width = height * aspectRatio;\n          } else {\n            if (range.x >= 0) {\n              if (right < maxWidth) {\n                width += range.x;\n              } else if (range.y <= 0 && top <= minTop) {\n                renderable = false;\n              }\n            } else {\n              width += range.x;\n            }\n\n            if (range.y <= 0) {\n              if (top > minTop) {\n                height -= range.y;\n                top += range.y;\n              }\n            } else {\n              height -= range.y;\n              top += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_SOUTH_WEST;\n            height = 0;\n            width = 0;\n          } else if (width < 0) {\n            action = ACTION_NORTH_WEST;\n            width = 0;\n          } else if (height < 0) {\n            action = ACTION_SOUTH_EAST;\n            height = 0;\n          }\n\n          break;\n\n        case ACTION_NORTH_WEST:\n          if (aspectRatio) {\n            if (range.y <= 0 && (top <= minTop || left <= minLeft)) {\n              renderable = false;\n              break;\n            }\n\n            height -= range.y;\n            top += range.y;\n            width = height * aspectRatio;\n            left += range.X;\n          } else {\n            if (range.x <= 0) {\n              if (left > minLeft) {\n                width -= range.x;\n                left += range.x;\n              } else if (range.y <= 0 && top <= minTop) {\n                renderable = false;\n              }\n            } else {\n              width -= range.x;\n              left += range.x;\n            }\n\n            if (range.y <= 0) {\n              if (top > minTop) {\n                height -= range.y;\n                top += range.y;\n              }\n            } else {\n              height -= range.y;\n              top += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_SOUTH_EAST;\n            height = 0;\n            width = 0;\n          } else if (width < 0) {\n            action = ACTION_NORTH_EAST;\n            width = 0;\n          } else if (height < 0) {\n            action = ACTION_SOUTH_WEST;\n            height = 0;\n          }\n\n          break;\n\n        case ACTION_SOUTH_WEST:\n          if (aspectRatio) {\n            if (range.x <= 0 && (left <= minLeft || bottom >= maxHeight)) {\n              renderable = false;\n              break;\n            }\n\n            width -= range.x;\n            left += range.x;\n            height = width / aspectRatio;\n          } else {\n            if (range.x <= 0) {\n              if (left > minLeft) {\n                width -= range.x;\n                left += range.x;\n              } else if (range.y >= 0 && bottom >= maxHeight) {\n                renderable = false;\n              }\n            } else {\n              width -= range.x;\n              left += range.x;\n            }\n\n            if (range.y >= 0) {\n              if (bottom < maxHeight) {\n                height += range.y;\n              }\n            } else {\n              height += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_NORTH_EAST;\n            height = 0;\n            width = 0;\n          } else if (width < 0) {\n            action = ACTION_SOUTH_EAST;\n            width = 0;\n          } else if (height < 0) {\n            action = ACTION_NORTH_WEST;\n            height = 0;\n          }\n\n          break;\n\n        case ACTION_SOUTH_EAST:\n          if (aspectRatio) {\n            if (range.x >= 0 && (right >= maxWidth || bottom >= maxHeight)) {\n              renderable = false;\n              break;\n            }\n\n            width += range.x;\n            height = width / aspectRatio;\n          } else {\n            if (range.x >= 0) {\n              if (right < maxWidth) {\n                width += range.x;\n              } else if (range.y >= 0 && bottom >= maxHeight) {\n                renderable = false;\n              }\n            } else {\n              width += range.x;\n            }\n\n            if (range.y >= 0) {\n              if (bottom < maxHeight) {\n                height += range.y;\n              }\n            } else {\n              height += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_NORTH_WEST;\n            height = 0;\n            width = 0;\n          } else if (width < 0) {\n            action = ACTION_SOUTH_WEST;\n            width = 0;\n          } else if (height < 0) {\n            action = ACTION_NORTH_EAST;\n            height = 0;\n          }\n\n          break;\n\n        // Move canvas\n        case ACTION_MOVE:\n          this.move(range.x, range.y);\n          renderable = false;\n          break;\n\n        // Zoom canvas\n        case ACTION_ZOOM:\n          this.zoom((function (x1, y1, x2, y2) {\n            var z1 = sqrt(x1 * x1 + y1 * y1);\n            var z2 = sqrt(x2 * x2 + y2 * y2);\n\n            return (z2 - z1) / z1;\n          })(\n            abs(this.startX - this.startX2),\n            abs(this.startY - this.startY2),\n            abs(this.endX - this.endX2),\n            abs(this.endY - this.endY2)\n          ), event);\n          this.startX2 = this.endX2;\n          this.startY2 = this.endY2;\n          renderable = false;\n          break;\n\n        // Create crop box\n        case ACTION_CROP:\n          if (!range.x || !range.y) {\n            renderable = false;\n            break;\n          }\n\n          offset = this.$cropper.offset();\n          left = this.startX - offset.left;\n          top = this.startY - offset.top;\n          width = cropBox.minWidth;\n          height = cropBox.minHeight;\n\n          if (range.x > 0) {\n            action = range.y > 0 ? ACTION_SOUTH_EAST : ACTION_NORTH_EAST;\n          } else if (range.x < 0) {\n            left -= width;\n            action = range.y > 0 ? ACTION_SOUTH_WEST : ACTION_NORTH_WEST;\n          }\n\n          if (range.y < 0) {\n            top -= height;\n          }\n\n          // Show the crop box if is hidden\n          if (!this.isCropped) {\n            this.$cropBox.removeClass(CLASS_HIDDEN);\n            this.isCropped = true;\n\n            if (this.limited) {\n              this.limitCropBox(true, true);\n            }\n          }\n\n          break;\n\n        // No default\n      }\n\n      if (renderable) {\n        cropBox.width = width;\n        cropBox.height = height;\n        cropBox.left = left;\n        cropBox.top = top;\n        this.action = action;\n\n        this.renderCropBox();\n      }\n\n      // Override\n      this.startX = this.endX;\n      this.startY = this.endY;\n    },\n\n    // Show the crop box manually\n    crop: function () {\n      if (!this.isBuilt || this.isDisabled) {\n        return;\n      }\n\n      if (!this.isCropped) {\n        this.isCropped = true;\n        this.limitCropBox(true, true);\n\n        if (this.options.modal) {\n          this.$dragBox.addClass(CLASS_MODAL);\n        }\n\n        this.$cropBox.removeClass(CLASS_HIDDEN);\n      }\n\n      this.setCropBoxData(this.initialCropBox);\n    },\n\n    // Reset the image and crop box to their initial states\n    reset: function () {\n      if (!this.isBuilt || this.isDisabled) {\n        return;\n      }\n\n      this.image = $.extend({}, this.initialImage);\n      this.canvas = $.extend({}, this.initialCanvas);\n      this.cropBox = $.extend({}, this.initialCropBox);\n\n      this.renderCanvas();\n\n      if (this.isCropped) {\n        this.renderCropBox();\n      }\n    },\n\n    // Clear the crop box\n    clear: function () {\n      if (!this.isCropped || this.isDisabled) {\n        return;\n      }\n\n      $.extend(this.cropBox, {\n        left: 0,\n        top: 0,\n        width: 0,\n        height: 0\n      });\n\n      this.isCropped = false;\n      this.renderCropBox();\n\n      this.limitCanvas(true, true);\n\n      // Render canvas after crop box rendered\n      this.renderCanvas();\n\n      this.$dragBox.removeClass(CLASS_MODAL);\n      this.$cropBox.addClass(CLASS_HIDDEN);\n    },\n\n    /**\n     * Replace the image's src and rebuild the cropper\n     *\n     * @param {String} url\n     * @param {Boolean} onlyColorChanged (optional)\n     */\n    replace: function (url, onlyColorChanged) {\n      if (!this.isDisabled && url) {\n        if (this.isImg) {\n          this.$element.attr('src', url);\n        }\n\n        if (onlyColorChanged) {\n          this.url = url;\n          this.$clone.attr('src', url);\n\n          if (this.isBuilt) {\n            this.$preview.find('img').add(this.$clone2).attr('src', url);\n          }\n        } else {\n          if (this.isImg) {\n            this.isReplaced = true;\n          }\n\n          // Clear previous data\n          this.options.data = null;\n          this.load(url);\n        }\n      }\n    },\n\n    // Enable (unfreeze) the cropper\n    enable: function () {\n      if (this.isBuilt) {\n        this.isDisabled = false;\n        this.$cropper.removeClass(CLASS_DISABLED);\n      }\n    },\n\n    // Disable (freeze) the cropper\n    disable: function () {\n      if (this.isBuilt) {\n        this.isDisabled = true;\n        this.$cropper.addClass(CLASS_DISABLED);\n      }\n    },\n\n    // Destroy the cropper and remove the instance from the image\n    destroy: function () {\n      var $this = this.$element;\n\n      if (this.isLoaded) {\n        if (this.isImg && this.isReplaced) {\n          $this.attr('src', this.originalUrl);\n        }\n\n        this.unbuild();\n        $this.removeClass(CLASS_HIDDEN);\n      } else {\n        if (this.isImg) {\n          $this.off(EVENT_LOAD, this.start);\n        } else if (this.$clone) {\n          this.$clone.remove();\n        }\n      }\n\n      $this.removeData(NAMESPACE);\n    },\n\n    /**\n     * Move the canvas with relative offsets\n     *\n     * @param {Number} offsetX\n     * @param {Number} offsetY (optional)\n     */\n    move: function (offsetX, offsetY) {\n      var canvas = this.canvas;\n\n      this.moveTo(\n        isUndefined(offsetX) ? offsetX : canvas.left + num(offsetX),\n        isUndefined(offsetY) ? offsetY : canvas.top + num(offsetY)\n      );\n    },\n\n    /**\n     * Move the canvas to an absolute point\n     *\n     * @param {Number} x\n     * @param {Number} y (optional)\n     */\n    moveTo: function (x, y) {\n      var canvas = this.canvas;\n      var isChanged = false;\n\n      // If \"y\" is not present, its default value is \"x\"\n      if (isUndefined(y)) {\n        y = x;\n      }\n\n      x = num(x);\n      y = num(y);\n\n      if (this.isBuilt && !this.isDisabled && this.options.movable) {\n        if (isNumber(x)) {\n          canvas.left = x;\n          isChanged = true;\n        }\n\n        if (isNumber(y)) {\n          canvas.top = y;\n          isChanged = true;\n        }\n\n        if (isChanged) {\n          this.renderCanvas(true);\n        }\n      }\n    },\n\n    /**\n     * Zoom the canvas with a relative ratio\n     *\n     * @param {Number} ratio\n     * @param {jQuery Event} _event (private)\n     */\n    zoom: function (ratio, _event) {\n      var canvas = this.canvas;\n\n      ratio = num(ratio);\n\n      if (ratio < 0) {\n        ratio =  1 / (1 - ratio);\n      } else {\n        ratio = 1 + ratio;\n      }\n\n      this.zoomTo(canvas.width * ratio / canvas.naturalWidth, _event);\n    },\n\n    /**\n     * Zoom the canvas to an absolute ratio\n     *\n     * @param {Number} ratio\n     * @param {jQuery Event} _event (private)\n     */\n    zoomTo: function (ratio, _event) {\n      var options = this.options;\n      var canvas = this.canvas;\n      var width = canvas.width;\n      var height = canvas.height;\n      var naturalWidth = canvas.naturalWidth;\n      var naturalHeight = canvas.naturalHeight;\n      var originalEvent;\n      var newWidth;\n      var newHeight;\n      var offset;\n      var center;\n\n      ratio = num(ratio);\n\n      if (ratio >= 0 && this.isBuilt && !this.isDisabled && options.zoomable) {\n        newWidth = naturalWidth * ratio;\n        newHeight = naturalHeight * ratio;\n\n        if (_event) {\n          originalEvent = _event.originalEvent;\n        }\n\n        if (this.trigger(EVENT_ZOOM, {\n          originalEvent: originalEvent,\n          oldRatio: width / naturalWidth,\n          ratio: newWidth / naturalWidth\n        }).isDefaultPrevented()) {\n          return;\n        }\n\n        if (originalEvent) {\n          offset = this.$cropper.offset();\n          center = originalEvent.touches ? getTouchesCenter(originalEvent.touches) : {\n            pageX: _event.pageX || originalEvent.pageX || 0,\n            pageY: _event.pageY || originalEvent.pageY || 0\n          };\n\n          // Zoom from the triggering point of the event\n          canvas.left -= (newWidth - width) * (\n            ((center.pageX - offset.left) - canvas.left) / width\n          );\n          canvas.top -= (newHeight - height) * (\n            ((center.pageY - offset.top) - canvas.top) / height\n          );\n        } else {\n\n          // Zoom from the center of the canvas\n          canvas.left -= (newWidth - width) / 2;\n          canvas.top -= (newHeight - height) / 2;\n        }\n\n        canvas.width = newWidth;\n        canvas.height = newHeight;\n        this.renderCanvas(true);\n      }\n    },\n\n    /**\n     * Rotate the canvas with a relative degree\n     *\n     * @param {Number} degree\n     */\n    rotate: function (degree) {\n      this.rotateTo((this.image.rotate || 0) + num(degree));\n    },\n\n    /**\n     * Rotate the canvas to an absolute degree\n     * https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function#rotate()\n     *\n     * @param {Number} degree\n     */\n    rotateTo: function (degree) {\n      degree = num(degree);\n\n      if (isNumber(degree) && this.isBuilt && !this.isDisabled && this.options.rotatable) {\n        this.image.rotate = degree % 360;\n        this.isRotated = true;\n        this.renderCanvas(true);\n      }\n    },\n\n    /**\n     * Scale the image\n     * https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function#scale()\n     *\n     * @param {Number} scaleX\n     * @param {Number} scaleY (optional)\n     */\n    scale: function (scaleX, scaleY) {\n      var image = this.image;\n      var isChanged = false;\n\n      // If \"scaleY\" is not present, its default value is \"scaleX\"\n      if (isUndefined(scaleY)) {\n        scaleY = scaleX;\n      }\n\n      scaleX = num(scaleX);\n      scaleY = num(scaleY);\n\n      if (this.isBuilt && !this.isDisabled && this.options.scalable) {\n        if (isNumber(scaleX)) {\n          image.scaleX = scaleX;\n          isChanged = true;\n        }\n\n        if (isNumber(scaleY)) {\n          image.scaleY = scaleY;\n          isChanged = true;\n        }\n\n        if (isChanged) {\n          this.renderImage(true);\n        }\n      }\n    },\n\n    /**\n     * Scale the abscissa of the image\n     *\n     * @param {Number} scaleX\n     */\n    scaleX: function (scaleX) {\n      var scaleY = this.image.scaleY;\n\n      this.scale(scaleX, isNumber(scaleY) ? scaleY : 1);\n    },\n\n    /**\n     * Scale the ordinate of the image\n     *\n     * @param {Number} scaleY\n     */\n    scaleY: function (scaleY) {\n      var scaleX = this.image.scaleX;\n\n      this.scale(isNumber(scaleX) ? scaleX : 1, scaleY);\n    },\n\n    /**\n     * Get the cropped area position and size data (base on the original image)\n     *\n     * @param {Boolean} isRounded (optional)\n     * @return {Object} data\n     */\n    getData: function (isRounded) {\n      var options = this.options;\n      var image = this.image;\n      var canvas = this.canvas;\n      var cropBox = this.cropBox;\n      var ratio;\n      var data;\n\n      if (this.isBuilt && this.isCropped) {\n        data = {\n          x: cropBox.left - canvas.left,\n          y: cropBox.top - canvas.top,\n          width: cropBox.width,\n          height: cropBox.height\n        };\n\n        ratio = image.width / image.naturalWidth;\n\n        $.each(data, function (i, n) {\n          n = n / ratio;\n          data[i] = isRounded ? round(n) : n;\n        });\n\n      } else {\n        data = {\n          x: 0,\n          y: 0,\n          width: 0,\n          height: 0\n        };\n      }\n\n      if (options.rotatable) {\n        data.rotate = image.rotate || 0;\n      }\n\n      if (options.scalable) {\n        data.scaleX = image.scaleX || 1;\n        data.scaleY = image.scaleY || 1;\n      }\n\n      return data;\n    },\n\n    /**\n     * Set the cropped area position and size with new data\n     *\n     * @param {Object} data\n     */\n    setData: function (data) {\n      var options = this.options;\n      var image = this.image;\n      var canvas = this.canvas;\n      var cropBoxData = {};\n      var isRotated;\n      var isScaled;\n      var ratio;\n\n      if ($.isFunction(data)) {\n        data = data.call(this.element);\n      }\n\n      if (this.isBuilt && !this.isDisabled && $.isPlainObject(data)) {\n        if (options.rotatable) {\n          if (isNumber(data.rotate) && data.rotate !== image.rotate) {\n            image.rotate = data.rotate;\n            this.isRotated = isRotated = true;\n          }\n        }\n\n        if (options.scalable) {\n          if (isNumber(data.scaleX) && data.scaleX !== image.scaleX) {\n            image.scaleX = data.scaleX;\n            isScaled = true;\n          }\n\n          if (isNumber(data.scaleY) && data.scaleY !== image.scaleY) {\n            image.scaleY = data.scaleY;\n            isScaled = true;\n          }\n        }\n\n        if (isRotated) {\n          this.renderCanvas();\n        } else if (isScaled) {\n          this.renderImage();\n        }\n\n        ratio = image.width / image.naturalWidth;\n\n        if (isNumber(data.x)) {\n          cropBoxData.left = data.x * ratio + canvas.left;\n        }\n\n        if (isNumber(data.y)) {\n          cropBoxData.top = data.y * ratio + canvas.top;\n        }\n\n        if (isNumber(data.width)) {\n          cropBoxData.width = data.width * ratio;\n        }\n\n        if (isNumber(data.height)) {\n          cropBoxData.height = data.height * ratio;\n        }\n\n        this.setCropBoxData(cropBoxData);\n      }\n    },\n\n    /**\n     * Get the container size data\n     *\n     * @return {Object} data\n     */\n    getContainerData: function () {\n      return this.isBuilt ? this.container : {};\n    },\n\n    /**\n     * Get the image position and size data\n     *\n     * @return {Object} data\n     */\n    getImageData: function () {\n      return this.isLoaded ? this.image : {};\n    },\n\n    /**\n     * Get the canvas position and size data\n     *\n     * @return {Object} data\n     */\n    getCanvasData: function () {\n      var canvas = this.canvas;\n      var data = {};\n\n      if (this.isBuilt) {\n        $.each([\n          'left',\n          'top',\n          'width',\n          'height',\n          'naturalWidth',\n          'naturalHeight'\n        ], function (i, n) {\n          data[n] = canvas[n];\n        });\n      }\n\n      return data;\n    },\n\n    /**\n     * Set the canvas position and size with new data\n     *\n     * @param {Object} data\n     */\n    setCanvasData: function (data) {\n      var canvas = this.canvas;\n      var aspectRatio = canvas.aspectRatio;\n\n      if ($.isFunction(data)) {\n        data = data.call(this.$element);\n      }\n\n      if (this.isBuilt && !this.isDisabled && $.isPlainObject(data)) {\n        if (isNumber(data.left)) {\n          canvas.left = data.left;\n        }\n\n        if (isNumber(data.top)) {\n          canvas.top = data.top;\n        }\n\n        if (isNumber(data.width)) {\n          canvas.width = data.width;\n          canvas.height = data.width / aspectRatio;\n        } else if (isNumber(data.height)) {\n          canvas.height = data.height;\n          canvas.width = data.height * aspectRatio;\n        }\n\n        this.renderCanvas(true);\n      }\n    },\n\n    /**\n     * Get the crop box position and size data\n     *\n     * @return {Object} data\n     */\n    getCropBoxData: function () {\n      var cropBox = this.cropBox;\n      var data;\n\n      if (this.isBuilt && this.isCropped) {\n        data = {\n          left: cropBox.left,\n          top: cropBox.top,\n          width: cropBox.width,\n          height: cropBox.height\n        };\n      }\n\n      return data || {};\n    },\n\n    /**\n     * Set the crop box position and size with new data\n     *\n     * @param {Object} data\n     */\n    setCropBoxData: function (data) {\n      var cropBox = this.cropBox;\n      var aspectRatio = this.options.aspectRatio;\n      var isWidthChanged;\n      var isHeightChanged;\n\n      if ($.isFunction(data)) {\n        data = data.call(this.$element);\n      }\n\n      if (this.isBuilt && this.isCropped && !this.isDisabled && $.isPlainObject(data)) {\n\n        if (isNumber(data.left)) {\n          cropBox.left = data.left;\n        }\n\n        if (isNumber(data.top)) {\n          cropBox.top = data.top;\n        }\n\n        if (isNumber(data.width)) {\n          isWidthChanged = true;\n          cropBox.width = data.width;\n        }\n\n        if (isNumber(data.height)) {\n          isHeightChanged = true;\n          cropBox.height = data.height;\n        }\n\n        if (aspectRatio) {\n          if (isWidthChanged) {\n            cropBox.height = cropBox.width / aspectRatio;\n          } else if (isHeightChanged) {\n            cropBox.width = cropBox.height * aspectRatio;\n          }\n        }\n\n        this.renderCropBox();\n      }\n    },\n\n    /**\n     * Get a canvas drawn the cropped image\n     *\n     * @param {Object} options (optional)\n     * @return {HTMLCanvasElement} canvas\n     */\n    getCroppedCanvas: function (options) {\n      var originalWidth;\n      var originalHeight;\n      var canvasWidth;\n      var canvasHeight;\n      var scaledWidth;\n      var scaledHeight;\n      var scaledRatio;\n      var aspectRatio;\n      var canvas;\n      var context;\n      var data;\n\n      if (!this.isBuilt || !this.isCropped || !SUPPORT_CANVAS) {\n        return;\n      }\n\n      if (!$.isPlainObject(options)) {\n        options = {};\n      }\n\n      data = this.getData();\n      originalWidth = data.width;\n      originalHeight = data.height;\n      aspectRatio = originalWidth / originalHeight;\n\n      if ($.isPlainObject(options)) {\n        scaledWidth = options.width;\n        scaledHeight = options.height;\n\n        if (scaledWidth) {\n          scaledHeight = scaledWidth / aspectRatio;\n          scaledRatio = scaledWidth / originalWidth;\n        } else if (scaledHeight) {\n          scaledWidth = scaledHeight * aspectRatio;\n          scaledRatio = scaledHeight / originalHeight;\n        }\n      }\n\n      // The canvas element will use `Math.floor` on a float number, so floor first\n      canvasWidth = floor(scaledWidth || originalWidth);\n      canvasHeight = floor(scaledHeight || originalHeight);\n\n      canvas = $('<canvas>')[0];\n      canvas.width = canvasWidth;\n      canvas.height = canvasHeight;\n      context = canvas.getContext('2d');\n\n      if (options.fillColor) {\n        context.fillStyle = options.fillColor;\n        context.fillRect(0, 0, canvasWidth, canvasHeight);\n      }\n\n      // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D.drawImage\n      context.drawImage.apply(context, (function () {\n        var source = getSourceCanvas(this.$clone[0], this.image);\n        var sourceWidth = source.width;\n        var sourceHeight = source.height;\n        var canvas = this.canvas;\n        var params = [source];\n\n        // Source canvas\n        var srcX = data.x + canvas.naturalWidth * (abs(data.scaleX || 1) - 1) / 2;\n        var srcY = data.y + canvas.naturalHeight * (abs(data.scaleY || 1) - 1) / 2;\n        var srcWidth;\n        var srcHeight;\n\n        // Destination canvas\n        var dstX;\n        var dstY;\n        var dstWidth;\n        var dstHeight;\n\n        if (srcX <= -originalWidth || srcX > sourceWidth) {\n          srcX = srcWidth = dstX = dstWidth = 0;\n        } else if (srcX <= 0) {\n          dstX = -srcX;\n          srcX = 0;\n          srcWidth = dstWidth = min(sourceWidth, originalWidth + srcX);\n        } else if (srcX <= sourceWidth) {\n          dstX = 0;\n          srcWidth = dstWidth = min(originalWidth, sourceWidth - srcX);\n        }\n\n        if (srcWidth <= 0 || srcY <= -originalHeight || srcY > sourceHeight) {\n          srcY = srcHeight = dstY = dstHeight = 0;\n        } else if (srcY <= 0) {\n          dstY = -srcY;\n          srcY = 0;\n          srcHeight = dstHeight = min(sourceHeight, originalHeight + srcY);\n        } else if (srcY <= sourceHeight) {\n          dstY = 0;\n          srcHeight = dstHeight = min(originalHeight, sourceHeight - srcY);\n        }\n\n        // All the numerical parameters should be integer for `drawImage` (#476)\n        params.push(floor(srcX), floor(srcY), floor(srcWidth), floor(srcHeight));\n\n        // Scale destination sizes\n        if (scaledRatio) {\n          dstX *= scaledRatio;\n          dstY *= scaledRatio;\n          dstWidth *= scaledRatio;\n          dstHeight *= scaledRatio;\n        }\n\n        // Avoid \"IndexSizeError\" in IE and Firefox\n        if (dstWidth > 0 && dstHeight > 0) {\n          params.push(floor(dstX), floor(dstY), floor(dstWidth), floor(dstHeight));\n        }\n\n        return params;\n      }).call(this));\n\n      return canvas;\n    },\n\n    /**\n     * Change the aspect ratio of the crop box\n     *\n     * @param {Number} aspectRatio\n     */\n    setAspectRatio: function (aspectRatio) {\n      var options = this.options;\n\n      if (!this.isDisabled && !isUndefined(aspectRatio)) {\n\n        // 0 -> NaN\n        options.aspectRatio = max(0, aspectRatio) || NaN;\n\n        if (this.isBuilt) {\n          this.initCropBox();\n\n          if (this.isCropped) {\n            this.renderCropBox();\n          }\n        }\n      }\n    },\n\n    /**\n     * Change the drag mode\n     *\n     * @param {String} mode (optional)\n     */\n    setDragMode: function (mode) {\n      var options = this.options;\n      var croppable;\n      var movable;\n\n      if (this.isLoaded && !this.isDisabled) {\n        croppable = mode === ACTION_CROP;\n        movable = options.movable && mode === ACTION_MOVE;\n        mode = (croppable || movable) ? mode : ACTION_NONE;\n\n        this.$dragBox.\n          data(DATA_ACTION, mode).\n          toggleClass(CLASS_CROP, croppable).\n          toggleClass(CLASS_MOVE, movable);\n\n        if (!options.cropBoxMovable) {\n\n          // Sync drag mode to crop box when it is not movable(#300)\n          this.$face.\n            data(DATA_ACTION, mode).\n            toggleClass(CLASS_CROP, croppable).\n            toggleClass(CLASS_MOVE, movable);\n        }\n      }\n    }\n  };\n\n  Cropper.DEFAULTS = {\n\n    // Define the view mode of the cropper\n    viewMode: 0, // 0, 1, 2, 3\n\n    // Define the dragging mode of the cropper\n    dragMode: 'crop', // 'crop', 'move' or 'none'\n\n    // Define the aspect ratio of the crop box\n    aspectRatio: NaN,\n\n    // An object with the previous cropping result data\n    data: null,\n\n    // A jQuery selector for adding extra containers to preview\n    preview: '',\n\n    // Re-render the cropper when resize the window\n    responsive: true,\n\n    // Restore the cropped area after resize the window\n    restore: true,\n\n    // Check if the current image is a cross-origin image\n    checkCrossOrigin: true,\n\n    // Check the current image's Exif Orientation information\n    checkOrientation: true,\n\n    // Show the black modal\n    modal: true,\n\n    // Show the dashed lines for guiding\n    guides: true,\n\n    // Show the center indicator for guiding\n    center: true,\n\n    // Show the white modal to highlight the crop box\n    highlight: true,\n\n    // Show the grid background\n    background: true,\n\n    // Enable to crop the image automatically when initialize\n    autoCrop: true,\n\n    // Define the percentage of automatic cropping area when initializes\n    autoCropArea: 0.8,\n\n    // Enable to move the image\n    movable: true,\n\n    // Enable to rotate the image\n    rotatable: true,\n\n    // Enable to scale the image\n    scalable: true,\n\n    // Enable to zoom the image\n    zoomable: true,\n\n    // Enable to zoom the image by dragging touch\n    zoomOnTouch: true,\n\n    // Enable to zoom the image by wheeling mouse\n    zoomOnWheel: true,\n\n    // Define zoom ratio when zoom the image by wheeling mouse\n    wheelZoomRatio: 0.1,\n\n    // Enable to move the crop box\n    cropBoxMovable: true,\n\n    // Enable to resize the crop box\n    cropBoxResizable: true,\n\n    // Toggle drag mode between \"crop\" and \"move\" when click twice on the cropper\n    toggleDragModeOnDblclick: true,\n\n    // Size limitation\n    minCanvasWidth: 0,\n    minCanvasHeight: 0,\n    minCropBoxWidth: 0,\n    minCropBoxHeight: 0,\n    minContainerWidth: 200,\n    minContainerHeight: 100,\n\n    // Shortcuts of events\n    build: null,\n    built: null,\n    cropstart: null,\n    cropmove: null,\n    cropend: null,\n    crop: null,\n    zoom: null\n  };\n\n  Cropper.setDefaults = function (options) {\n    $.extend(Cropper.DEFAULTS, options);\n  };\n\n  Cropper.TEMPLATE = (\n    '<div class=\"cropper-container\">' +\n      '<div class=\"cropper-wrap-box\">' +\n        '<div class=\"cropper-canvas\"></div>' +\n      '</div>' +\n      '<div class=\"cropper-drag-box\"></div>' +\n      '<div class=\"cropper-crop-box\">' +\n        '<span class=\"cropper-view-box\"></span>' +\n        '<span class=\"cropper-dashed dashed-h\"></span>' +\n        '<span class=\"cropper-dashed dashed-v\"></span>' +\n        '<span class=\"cropper-center\"></span>' +\n        '<span class=\"cropper-face\"></span>' +\n        '<span class=\"cropper-line line-e\" data-action=\"e\"></span>' +\n        '<span class=\"cropper-line line-n\" data-action=\"n\"></span>' +\n        '<span class=\"cropper-line line-w\" data-action=\"w\"></span>' +\n        '<span class=\"cropper-line line-s\" data-action=\"s\"></span>' +\n        '<span class=\"cropper-point point-e\" data-action=\"e\"></span>' +\n        '<span class=\"cropper-point point-n\" data-action=\"n\"></span>' +\n        '<span class=\"cropper-point point-w\" data-action=\"w\"></span>' +\n        '<span class=\"cropper-point point-s\" data-action=\"s\"></span>' +\n        '<span class=\"cropper-point point-ne\" data-action=\"ne\"></span>' +\n        '<span class=\"cropper-point point-nw\" data-action=\"nw\"></span>' +\n        '<span class=\"cropper-point point-sw\" data-action=\"sw\"></span>' +\n        '<span class=\"cropper-point point-se\" data-action=\"se\"></span>' +\n      '</div>' +\n    '</div>'\n  );\n\n  // Save the other cropper\n  Cropper.other = $.fn.cropper;\n\n  // Register as jQuery plugin\n  $.fn.cropper = function (option) {\n    var args = toArray(arguments, 1);\n    var result;\n\n    this.each(function () {\n      var $this = $(this);\n      var data = $this.data(NAMESPACE);\n      var options;\n      var fn;\n\n      if (!data) {\n        if (/destroy/.test(option)) {\n          return;\n        }\n\n        options = $.extend({}, $this.data(), $.isPlainObject(option) && option);\n        $this.data(NAMESPACE, (data = new Cropper(this, options)));\n      }\n\n      if (typeof option === 'string' && $.isFunction(fn = data[option])) {\n        result = fn.apply(data, args);\n      }\n    });\n\n    return isUndefined(result) ? this : result;\n  };\n\n  $.fn.cropper.Constructor = Cropper;\n  $.fn.cropper.setDefaults = Cropper.setDefaults;\n\n  // No conflict\n  $.fn.cropper.noConflict = function () {\n    $.fn.cropper = Cropper.other;\n    return this;\n  };\n\nmodule.exports = Cropper;\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/cropper.js\n **/"],"sourceRoot":""}